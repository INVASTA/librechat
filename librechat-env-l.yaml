# =============================================================================
# LIBRECHAT КОНФИГУРАЦИЯ ДЛЯ RAILWAY ХОСТИНГА
# =============================================================================
# Этот файл содержит настройки для кастомизации LibreChat
# Размещается в корневой директории проекта

# =============================================================================
# ВЕРСИЯ КОНФИГУРАЦИИ
# =============================================================================
version: 1.0.5
# Указывает версию схемы конфигурации LibreChat

# =============================================================================
# НАСТРОЙКИ КЭШИРОВАНИЯ
# =============================================================================
cache: true
# Включает кэширование для улучшения производительности
# На Railway это особенно важно для экономии ресурсов

# =============================================================================
# ПОЛЬЗОВАТЕЛЬСКАЯ СИСТЕМА РЕГИСТРАЦИИ
# =============================================================================
registration:
  socialLogins: ["discord", "github", "google"]
  # Доступные методы социальной авторизации
  # Удалите ненужные или добавьте свои
  
# =============================================================================
# НАСТРОЙКИ ИНТЕРФЕЙСА
# =============================================================================
interface:
  # Настройки внешнего вида чата
  privacyPolicy:
    externalUrl: "https://your-privacy-policy-url.com"
    openNewTab: true
  termsOfService:
    externalUrl: "https://your-terms-url.com" 
    openNewTab: true

# =============================================================================
# КОНФИГУРАЦИЯ ФАЙЛОВ И ЗАГРУЗОК
# =============================================================================
fileConfig:
  # Настройки для работы с файлами
  endpoints:
    assistants:
      fileLimit: 5
      # Максимальное количество файлов для ассистентов
      fileSizeLimit: 10  # MB
      # Максимальный размер файла в мегабайтах
      
    openAI:
      disabled: false
      fileLimit: 5
      fileSizeLimit: 10
      
    default:
      totalSizeLimit: 50  # MB общий лимит для всех файлов

# =============================================================================
# ОСНОВНАЯ КОНФИГУРАЦИЯ ENDPOINTS (ПРОВАЙДЕРОВ ИИ)
# =============================================================================
endpoints:
  # ---------------------------------------------------------------------------
  # ANTHROPIC CLAUDE МОДЕЛИ
  # ---------------------------------------------------------------------------
  anthropic:
    # Название провайдера в интерфейсе
    name: "Claude by Anthropic"
    apiKey: "${ANTHROPIC_API_KEY}"
    # Используем переменную окружения для безопасности
    baseURL: "https://api.anthropic.com/v1"
    # Исправленный базовый URL для API Anthropic с версией
    
    models:
      default: [
        "claude-3-5-sonnet-20241022",
        "claude-3-haiku-20240307",
        "claude-3-opus-20240229"
      ]
      # Статический список моделей для избежания проблем с fetch
      
      fetch: false
      # Отключаем автоматическое получение моделей
      
      userIdQuery: false
      # Не добавлять ID пользователя в запросы

    titleConvo: true
    # Автоматически генерировать названия для бесед
    
    titleModel: "claude-3-haiku-20240307"
    # Модель для генерации названий (более быстрая и дешевая)
    
    dropParams: ["stop", "user"]
    # Параметры, которые нужно исключить из запросов

  # ---------------------------------------------------------------------------
  # OPENAI МОДЕЛИ (GPT)
  # ---------------------------------------------------------------------------
  openAI:
    name: "OpenAI GPT"
    apiKey: "${OPENAI_API_KEY}"
    baseURL: "https://api.openai.com/v1"
    # Стандартный URL для OpenAI API (уже правильный)
    
    models:
      default: [
        "gpt-4o",
        "gpt-4o-mini", 
        "gpt-4-turbo",
        "gpt-3.5-turbo"
      ]
      # Статический список доступных моделей OpenAI
      
      fetch: false
      # Отключаем автоматическое получение для избежания ошибок

    titleConvo: true
    titleModel: "gpt-3.5-turbo"
    # Используем более дешевую модель для генерации названий
    
    summarize: false
    # Отключаем автоматическое резюмирование длинных разговоров
    
    forcePrompt: false
    # Не принуждать к использованию системных промптов

  # ---------------------------------------------------------------------------
  # GOOGLE GEMINI МОДЕЛИ
  # ---------------------------------------------------------------------------
  google:
    name: "Google Gemini"
    apiKey: "${GOOGLE_API_KEY}"
    baseURL: "https://generativelanguage.googleapis.com/v1beta"
    # URL для Google Generative AI API
    
    models:
      default: [
        "gemini-1.5-pro-latest",
        "gemini-1.5-flash-latest",
        "gemini-pro"
      ]
      # Доступные модели Gemini (статический список)
      
      fetch: false
      # Используем статический список моделей

    titleConvo: true
    titleModel: "gemini-1.5-flash-latest"
    # Быстрая модель для генерации названий

  # ---------------------------------------------------------------------------
  # ПОЛЬЗОВАТЕЛЬСКИЙ ENDPOINT ДЛЯ GROK
  # ---------------------------------------------------------------------------
  custom:
    # Конфигурация для кастомных провайдеров
    - name: "xAI Grok"
      # Отображаемое имя в интерфейсе
      apiKey: "${XAI_API_KEY}"
      # Переменная окружения с API ключом для xAI
      baseURL: "https://api.x.ai/v1"
      # Базовый URL для xAI API
      
      models:
        default: ["grok-beta"]
        # Доступные модели Grok
        fetch: false
        # Не получаем список автоматически, используем статический

      titleConvo: true
      titleModel: "grok-beta"
      # Модель для генерации названий бесед
      
      summarize: false
      forcePrompt: false
      
      # Дополнительные настройки для совместимости
      headers:
        "Content-Type": "application/json"
        # Обязательный заголовок для корректной работы
        
      dropParams: ["stop", "user", "frequency_penalty", "presence_penalty"]
      # Параметры, которые Grok не поддерживает

# =============================================================================
# НАСТРОЙКИ ЛОГИРОВАНИЯ
# =============================================================================
rateLimits:
  # Ограничения скорости запросов для предотвращения злоупотреблений
  fileUploads:
    ipMax: 100
    # Максимум загрузок файлов с одного IP в час
    ipWindowInMinutes: 60
    userMax: 50
    # Максимум загрузок для одного пользователя в час
    userWindowInMinutes: 60

# =============================================================================
# ПЕРЕМЕННЫЕ ОКРУЖЕНИЯ ДЛЯ RAILWAY
# =============================================================================
# Убедитесь, что следующие переменные настроены в Railway:
# 
# ANTHROPIC_API_KEY=your_anthropic_key_here
# OPENAI_API_KEY=your_openai_key_here  
# GOOGLE_API_KEY=your_google_key_here
# XAI_API_KEY=your_xai_key_here
# 
# Дополнительные переменные для Railway:
# DATABASE_URL=postgresql://... (предоставляется Railway автоматически)
# REDIS_URL=redis://... (если используете Redis)
# 
# Настройки приложения:
# HOST=0.0.0.0
# PORT=3080
# DOMAIN_CLIENT=https://your-app-name.up.railway.app
# DOMAIN_SERVER=https://your-app-name.up.railway.app
# 
# Безопасность:
# JWT_SECRET=your_jwt_secret_here
# JWT_REFRESH_SECRET=your_jwt_refresh_secret_here
# CREDS_KEY=your_32_character_key_here
# CREDS_IV=your_16_character_iv_here
#
# =============================================================================
